

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

     <title>Lab 8</title> 
    <meta name="description" content="Piezo buzzer and Simon PCB">
    <meta name="author" content="Caleb Kemere">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/2018/assets/themes/bootstrap/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/2018/assets/themes/bootstrap/elec327.css" rel="stylesheet">
  
    <!--[if lt IE 9]>
      <script src="/assets/themes/bootstrap/resources/respond/Respond.min.js"></script>
    <![endif]-->

    <link href="/2018/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/2018/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>

        <nav class="navbar navbar-expand-lg navbar-dark bg-primary" role="navigation">
        <div class="container">
        <a class="navbar-brand" href="/2018/">Rice ELEC327 - Digital Systems Laboratory</a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="navbar-collapse collapse" id="navbarSupportedContent">
          <ul class="navbar-nav navbar-dark mr-auto">
            
            
            


  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/bonus">Bonus</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/">Home</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/parts_and_notes">Syllabus</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/syllabus">Syllabus</a></li>
      	
      
    
  




            <li class="nav-item dropdown">
              <a href="#" class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Labs</a>
              <ul class="dropdown-menu bg-primary" aria-labelledby="navbarDropdown"role="menu">
                
                
                


  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab1/">Lab 1</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab2/">Lab 2</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab3/">Lab 3</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab4/">Lab 4</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab5/">Lab 5</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab6/">Lab 6</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab7/">Lab 7</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item active"><a href="/2018/lab8/" class="dropdown-item active nav-link">Lab 8</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab9/">Lab 9</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/lab10/">Lab 10</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/midterm_project/">Project 1 - Midterm</a></li>
      	
      
    
  
    
      
      	
      	<li class="nav-item"><a class="dropdown-item nav-link" href="/2018/final_project/">Project 2 - Final</a></li>
      	
      
    
  




              </ul>
            </li>
          </ul>
      </div>
      </div>
    </nav>



    <div class="container under-navbar">
      
<h2 id="lab-8-piezo-buzzers-with-pwm-and-the-simon-pcb">Lab #8: Piezo Buzzers with PWM (and the Simon PCB)</h2>

<div class="alert alert-info" role="alert">
  <h4 id="there-are-three-goals-for-this-lab"><strong>There are three goals for this lab:</strong></h4>
  <ul>
    <li>To understand how PWM will affect sound production.</li>
  </ul>
</div>

<div class="alert alert-danger" role="alert">
  <h4 id="what-should-you-turn-in"><strong>What should you turn in?</strong></h4>
  <ol>
    <li>Turn in your code as <code class="highlighter-rouge">pwm_songs.c</code> and answered questions. (<em>Canvas</em>)</li>
    <li>Turn in the Simon EAGLE and gerber files.</li>
  </ol>

  <h4 id="what-should-you-demonstrate"><strong>What should you demonstrate?</strong></h4>
  <ol>
    <li>You <em>may</em> choose to demonstrate your Simon PCB or sketch.</li>
    <li>Demonstrate your functional sound sequence player.</li>
  </ol>
</div>

<h4 id="part-1-playing-tones-via-pwm">Part 1: Playing tones via PWM</h4>

<p>For the Simon midterm project, you’ll need to generate sounds appropriate for button presses,
success, and failure. Wire a piezo buzzer to a PWM-capable pin. Your goal is to create a
set of functions (i.e., a library) that will allow you to play arbitrary sequences of tones at
potentially different speeds. A piezo buzzer produces sounds by transducing electrical fields
into motion using a piezoelectric material. They are good for higher frequencies, but not those
in the lower part of our hearing spectrum. Begin by experimenting with PWM and the buzzer. Set
your PWM carrier frequency to 440 Hz (an “A”).</p>

<ol class="questions">
  <li>What happens as you vary the duty cycle from 0 to 50%? What about from 50% to 100%?</li>
  <li>Now build a timer module ISR to change the frequency every other cycle from 440 to 880 Hz
  and back. How does this sound? Can you explain?</li>
</ol>

<p>Now, modify the code you built for question 2 to be general. “Sound strings” should be
specified as a sequence of frequences (or periods) stored in an array, with a separate “tone
length” variable specifying how long each note should be played for. Note that because each
tone has a different frequency, keeping track of how long each has played is a slightly
nontrivial task (though you should be able to figure out a simple way of accumulating periods
properly to account for their different lengths). You should create a function with prototype
<code class="highlighter-rouge">void PlaySound(int* SoundString, int StringLength, int ToneDuration)</code> that initializes the
proper global state variables and starts the sound playing. The ISR should ensure that, once
started, the sound string is played once. You might want to create a special tone symbol which
corresponds to a “rest”, to enable more complex sounds.</p>

<p>Create the proper sequences for the first lines of “Twinkle, twinkle little star”, and “Mary had
a little lamb”. Set up an infinite loop so that you play a sequence and then have quiet for a
few seconds. <strong>You may use __delay_cycles for this part of this lab!</strong> <strong>Be prepared to
demonstrate how your code works, including playing the two sequences at different speeds.</strong></p>

<h4 id="part-2-simon-pcb---see-midterm-project-for-details">Part 2: Simon PCB - See midterm project for details</h4>



      <hr>
      <footer>
        <p>
        &copy; 2019 <a href="http://kemerelab.com">Caleb Kemere</a>
        and <a href="http://www.ece.rice.edu">Rice University ECE</a>
        </p>
      </footer>
    </div>

    

    <script src="/assets/themes/bootstrap/resources/jquery/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap/resources/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>


